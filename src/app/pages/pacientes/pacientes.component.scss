/* ===========================
   TOKENS (Figma)
=========================== */
:host{
  --bg:#f7faf9; --ink:#0f2a2e; --muted:#6b7a80;
  --primary:#46b39c; --primary-600:#3aa089; --rail:#146d60;
  --line:#e9eff1; --card:#ffffff; --shadow:0 10px 24px rgba(16,24,40,.08);

  --h-topbar: 40px;     /* altura real da topbar */
  --fs-title: 16px;     /* título menor */
  --rad-field: 8px;
  --w-search: 420px;    /* largura da busca */
  --w-select: 180px;    /* largura do select */
  --gap-x: 10px;
}

/* ===========================
   LAYOUT
=========================== */
.layout{
  display:grid;
  grid-template-columns:76px 1fr;
  min-height:100dvh;
  background:var(--bg);
  color:var(--ink);
  font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* ===========================
   RAIL (pílula)
=========================== */
.rail{
  position:sticky; top:0;
  height:100dvh;
  display:grid;
  grid-template-rows:auto 1fr auto;
  gap:16px;
  padding:12px 1px;
}
.rail .logo{ display:grid; place-items:center; margin-top:6px; }
.rail .logo-img{ width:36px; height:36px; object-fit:contain; display:block; }

.rail .menu, .rail .rodape-rail{
  position:relative; display:grid; justify-items:center; gap:10px;
}
.rail .menu{ padding:58px 0 14px; }
.rail .rodape-rail{ padding:14px 0 12px; }

/* trilho */
.rail .menu::before,
.rail .rodape-rail::after{
  content:''; position:absolute; left:10px; top:0;
  width:56px; height:100%; border-radius:28px; background:var(--rail);
  z-index:0; pointer-events:none;
}
.rail .item{
  width:44px; height:44px; display:grid; place-items:center;
  color:#eaf4f3; text-decoration:none; border-radius:12px; position:relative; z-index:1;
}
.rail .item:hover{ background:rgba(255,255,255,.08); }
.rail .item.ativo{ background:rgba(255,255,255,.16); }

/* ===========================
   CONTEÚDO
=========================== */
.conteudo{
  max-width:1280px; width:100%;
  padding:16px 28px 24px;   /* ↓ topo menor e consistente */
  margin:0 auto;
}

/* ===========================
   TOPBAR (clean + compacto)
=========================== */
.topbar{
  display:grid;
  grid-template-columns:auto 1fr auto;  /* [título+btn] [flex] [totais] */
  align-items:center;
  column-gap:16px;
  min-height:var(--h-topbar);
  margin-bottom:12px;                   /* ↑ dá respiro antes dos filtros */
}
.title-row{ display:inline-flex; align-items:center; gap:6px; min-width:0; }
.topbar .title{
  margin:0; font-size:var(--fs-title); line-height:1; font-weight:700;
  white-space:nowrap; color:#0f2a2e;
}
.meta-right{ display:inline-flex; align-items:center; justify-self:end; }
.totais{ font-size:12px; color:var(--muted); line-height:9; }

/* “+” pequeno */
.btn-plus{
  width:36px; height:36px; border-radius:8px;
  background:#63b9a6; color:#fff; border:0;
  display:grid; place-items:center;
  box-shadow:0 6px 16px rgba(70,179,156,.24);
  cursor:pointer;
}
.btn-plus .mat-icon{ width:18px; height:18px; font-size:18px; }
.btn-plus:hover{ filter:brightness(.96); }

/* hairline controla o salto dos filtros */
.hairline{ height:1px; background:var(--line); margin:4px 0 16px; }
.hairline.thin{ opacity:.7; }

/* ===========================
   FILTROS (slim 34px)
=========================== */
.filtros{
  display:grid;
  grid-template-columns:minmax(260px, var(--w-search)) auto var(--w-select);
  align-items:center; gap:var(--gap-x);
  margin-top:4px;                        /* ajuste fino logo abaixo da hairline */
}
.filtros .selecao{ justify-self:end; }
.btn-tune{
 height:var max-content;
  border-radius:8px; color:#6b7a80;
}

/* Material overrides apenas em .slim */
:host ::ng-deep .campo.slim .mat-mdc-text-field-wrapper{
  height:var(--h-field);
  border-radius:var(--rad-field) !important;
  background:#eef4f6; padding-right:6px;
}
:host ::ng-deep .campo.slim .mdc-notched-outline__leading,
:host ::ng-deep .campo.slim .mdc-notched-outline__trailing,
:host ::ng-deep .campo.slim .mdc-notched-outline__notch{
  border-color:#e2e9ec !important; border-radius:var(--rad-field);
}
:host ::ng-deep .campo.slim .mdc-floating-label{
  position:absolute !important; width:1px; height:1px; margin:-1px;
  padding:0; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}
:host ::ng-deep .campo.slim .mat-mdc-form-field-icon-prefix,
:host ::ng-deep .campo.slim .mat-mdc-form-field-icon-suffix{ color:#90a4aa; }
:host ::ng-deep .campo.slim .mdc-text-field__input::placeholder{ color:#90a4aa; }
:host ::ng-deep .campo.slim .mdc-text-field__input,
:host ::ng-deep .campo.slim .mat-mdc-select-value{
  font-size:14px; line-height:var(--h-field);
}
:host ::ng-deep .campo.slim .mat-mdc-form-field-focus-overlay{ background:transparent; }
:host ::ng-deep .campo.slim .mdc-text-field--focused .mdc-notched-outline__leading,
:host ::ng-deep .campo.slim .mdc-text-field--focused .mdc-notched-outline__trailing,
:host ::ng-deep .campo.slim .mdc-text-field--focused .mdc-notched-outline__notch{
  border-color:var(--primary) !important;
}

/* ===========================
   GRID DE CARDS
=========================== */
.grid{
  display:grid;
  grid-template-columns:repeat(4, minmax(260px,1fr));
  gap:18px; align-items:start; margin-top:12px;
}
@media (max-width:1200px){ .grid{ grid-template-columns:repeat(3, minmax(260px,1fr)); } }
@media (max-width:900px){ .grid{ grid-template-columns:repeat(2, minmax(260px,1fr)); } }

/* vazio */
.vazio{
  grid-column:1 / -1; text-align:center; color:var(--muted);
  padding:48px 0 36px;
}

/* ===========================
   PAGINAÇÃO
=========================== */
.paginacao{
  margin:10px auto 6px;
  display:flex; align-items:center; justify-content:center; gap:8px;
}
.paginacao button.mat-mdc-stroked-button{
  min-width:36px; height:36px; padding:0 10px; border-radius:8px;
}
.paginacao .atual{ border-color:var(--primary) !important; color:var(--primary); }

/* ===========================
   DIALOG
=========================== */
:host ::ng-deep .backdrop--blur{ backdrop-filter:blur(6px); background:rgba(15,23,42,.25); }
:host ::ng-deep .dlg--paciente .mat-mdc-dialog-container{ border-radius:16px; }

/* segurança */
img{ max-width:100%; height:auto; }

/* ===========================
   1) Rail: sombra arredondada no item ativo
=========================== */
.rail .item {
  border-radius: 12px;
  overflow: visible; /* garante sombra arredondada */
}
.rail .item.ativo {
  background: rgba(255,255,255,.16);
  box-shadow: 0 8px 18px rgba(20,109,96,.22), inset 0 0 0 1px rgba(255,255,255,.08);
}

/* ===========================
   2) Busca: centralizar o ícone de prefixo
=========================== */

:host ::ng-deep .mat-mdc-form-field-icon-prefix .mat-icon{
  width: 18px; height: 18px; font-size: 18px;
  line-height: 1;
}

/* (ajuste: altura correta do botão “tune” que estava com typo) */
.btn-tune{
  width: 36px;
  height: 36px; /* <- estava "height:var max-content" */
  border-radius: 8px;
  color: #6b7a80;
  display: grid;
  place-items: center;
}

/* Topbar em 2 linhas: título (linha 1) e ações (linha 2) */
.topbar{
  display: grid;
  grid-template-columns: 1fr auto;   /* esq: título/+  | dir: totais   */
  grid-template-rows: auto auto;     /* linha 1 título | linha 2 ações */
  column-gap: 16px;
}

/* Bloco do título ocupa as 2 linhas; dentro dele: título (1) e botão (2) */
.title-row{
  grid-column: 1 / 2;
  grid-row: 1 / span 2;
  display: grid;
  grid-template-rows: auto auto;
  align-content: start;
  row-gap: 6px;
}

/* ↓ Botão “+” fica na 2ª linha, centrado verticalmente */
.title-row .btn-plus{
  grid-row: 2;
  align-self: center;
  justify-self: start;
  margin: 0;          /* zera qualquer empurrão */
}

/* ↓ “0 Pacientes” também na 2ª linha e centrado verticalmente */
.meta-right{
  grid-column: 2 / 3;
  grid-row: 2;        /* mesma linha do + */
  align-self: center; /* alinha no centro da linha */
}

/* (opcional) dá um leve respiro extra antes dos filtros */
.hairline{ margin: 6px 0 16px; }
/* ===========================
   RESPONSIVO
=========================== */
@media (max-width:900px){
  .filtros{ grid-template-columns:1fr auto var(--w-select); }
}
@media (max-width:640px){
  .filtros{ grid-template-columns:1fr; }
  .btn-tune{ justify-self:start; }
  .totais{ display:none; }
}

/* ===== Mobile: rail horizontal no topo ===== */
@media (max-width: 768px){
  .layout{
    grid-template-columns: 1fr;      /* 1 coluna */
    grid-template-rows: auto 1fr;    /* rail em cima, conteúdo embaixo */
  }

  .rail{
    position: sticky; top: 0; z-index: 30;
    height: auto;                     /* deixa de ser 100vh */
    padding: 10px 12px;
    background: transparent;
    display: grid;
    grid-template-columns: auto 1fr;  /* logo | menu (centrado) */
    align-items: center;
    gap: 10px;
  }

  .rail .logo{ margin-top: 0; }

  /* menu horizontal “pílula” */
  .rail .menu{
    padding: 0;
    display: flex; align-items: center; justify-content: center;
    gap: 60px;
    background: var(--rail);
    border-radius: 999px;
    padding: 6px 8px;
  }
  .rail .menu::before,
  .rail .rodape-rail::after{ display: none; }

  .rail .item{
    width: 36px; height: 36px;
    border-radius: 10px;
    color: #eaf4f3;
  }
  .rail .item.ativo{
    background: rgba(255,255,255,.16);
    box-shadow: 0 8px 18px rgba(20,109,96,.22), inset 0 0 0 1px rgba(255,255,255,.08);
  }

  /* esconde o grupo de ícones do rodapé no mobile (opcional) */
  .rail .rodape-rail{ display: none; }

  /* conteúdo com um respiro a mais abaixo do rail */
  .conteudo{ padding-top: 12px; }
}

/* ===== Mobile: filtros em linha ===== */
@media (max-width: 640px){
  .filtros{
    grid-template-columns: 1fr 36px minmax(120px, 45%);
    column-gap: 8px;
    align-items: center;
    margin-top: 8px;
  }

  /* garante altura/centralização perfeitas */
  :host ::ng-deep .campo.slim .mat-mdc-text-field-wrapper{ height: 36px; }
  :host ::ng-deep .campo.slim .mdc-text-field__input{ line-height: 36px; }

  .btn-tune{
    width: 36px; height: 36px;
    display: grid; place-items: center;
  }
}

:host ::ng-deep .mat-mdc-form-field-icon-prefix{
  display: inline-flex !important;
  align-items: center !important;
  height: 100%;
}
:host ::ng-deep .mat-mdc-form-field-icon-prefix .mat-icon{
  width: 18px; height: 18px; font-size: 18px; line-height: 1;
}

/* topbar em duas linhas: título (1) | ações (2) */
.topbar{
  display: grid;
  grid-template-columns: 1fr auto;
  grid-template-rows: auto auto;
  column-gap: 16px;
}
.title-row{
  grid-column: 1 / 2;
  grid-row: 1 / span 2;
  display: grid; grid-template-rows: auto auto; row-gap: 6px;
}
.title-row .btn-plus{ grid-row: 2; align-self: center; justify-self: start; }
.meta-right{ grid-column: 2 / 3; grid-row: 2; align-self: center; }
